function getNav(){var e=$("nav[role=navigation] fieldset[role=search]").after('<fieldset class="mobile-nav"></fieldset>').next().append("<select></select>");e.children("select").append('<option value="">Navigate&hellip;</option>'),$("ul[role=main-navigation]").addClass("main-navigation"),$("ul.main-navigation a").each(function(t){e.children("select").append('<option value="'+t.href+'">&raquo; '+t.text+"</option>")}),$("ul.subscription a").each(function(t){e.children("select").append('<option value="'+t.href+'">&raquo; '+t.text+"</option>")}),e.children("select").bind("change",function(e){e.target.value&&(window.location.href=e.target.value)})}function addSidebarToggler(){$("body").hasClass("sidebar-footer")||($("#content").append('<span class="toggle-sidebar"></span>'),$(".toggle-sidebar").bind("click",function(e){e.preventDefault(),$("body").hasClass("collapse-sidebar")?$("body").removeClass("collapse-sidebar"):$("body").addClass("collapse-sidebar")}));var e=$("aside.sidebar > section");e.length>1&&e.each(function(t,a){e.length>=3&&a%3===0&&$(t).addClass("first");var n=(a+1)%2?"odd":"even";$(t).addClass(n)}),e.length>=3&&$("aside.sidebar").addClass("thirds")}function testFeatures(){var e=["maskImage"];$(e).map(function(e){Modernizr.testAllProps(e)?$("html").addClass(e):$("html").addClass("no-"+e)}),"placeholder"in document.createElement("input")?$("html").addClass("placeholder"):$("html").addClass("no-placeholder")}function addCodeLineNumbers(){"Microsoft Internet Explorer"!==navigator.appName&&$("div.gist-highlight").each(function(e){for(var t='<table><tbody><tr><td class="gutter">',a='<pre class="line-numbers">',n='</pre></td><td class="code">',r="</td></tr></tbody></table>",i=$(".line",e).length,s=1;i>=s;s++)a+='<span class="line-number">'+s+"</span>\n";var o=t+a+n+"<pre>"+$("pre",e).html()+"</pre>"+r;$(e).html(o)})}function flashVideoFallback(){var e="/assets/jwplayer/player.swf",t="/assets/jwplayer/glow/glow.xml";$("video").each(function(a){a=$(a),(!Modernizr.video.h264&&swfobject.getFlashPlayerVersion()||-1!==window.location.hash.indexOf("flash-test"))&&(a.children("source[src$=mp4]").first().map(function(n){var r=$(n).attr("src"),i="video_"+Math.round(1+1e5*Math.random()),s=a.attr("width"),o=parseInt(a.attr("height"),10)+30;a.after('<div class="flash-video"><div><div id='+i+">"),swfobject.embedSWF(e,i,s,o+30,"9.0.0",{file:r,image:a.attr("poster"),skin:t},{movie:r,wmode:"opaque",allowfullscreen:"true"})}),a.remove())})}function wrapFlashVideos(){$("object").each(function(e){if(e=$(e),$("param[name=movie]",e).length){var t=e.before('<div class="flash-video"><div>').previous();$(t).children().append(e)}}),$("iframe[src*=vimeo],iframe[src*=youtube]").each(function(e){e=$(e);var t=e.before('<div class="flash-video"><div>').previous();$(t).children().append(e)})}function renderDeliciousLinks(e){for(var t="<ul>",a=0,n=e.length;n>a;a++)t+='<li><a href="'+e[a].u+'" title="Tags: '+(""==e[a].t?"":e[a].t.join(", "))+'">'+e[a].d+"</a></li>";t+="</ul>",$("#delicious").html(t)}$.domReady(function(){testFeatures(),wrapFlashVideos(),flashVideoFallback(),addCodeLineNumbers(),getNav(),addSidebarToggler()}),function(e){function t(){s.content="width=device-width,minimum-scale="+i[0]+",maximum-scale="+i[1],e.removeEventListener(n,t,!0)}var a="addEventListener",n="gesturestart",r="querySelectorAll",i=[1,1],s=r in e?e[r]("meta[name=viewport]"):[];(s=s[s.length-1])&&a in e&&(t(),i=[.25,1.6],e[a](n,t,!0))}(document);var swfobject=function(){function e(e,a,n){var o,c=t(n);if(d.wk&&d.wk<312)return o;if(c)if(typeof e.id==r&&(e.id=n),d.ie&&d.win){var p,u="";for(p in e)e[p]!=Object.prototype[p]&&("data"==p.toLowerCase()?a.movie=e[p]:"styleclass"==p.toLowerCase()?u+=' class="'+e[p]+'"':"classid"!=p.toLowerCase()&&(u+=" "+p+'="'+e[p]+'"'));p="";for(var f in a)a[f]!=Object.prototype[f]&&(p+='<param name="'+f+'" value="'+a[f]+'" />');c.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+u+">"+p+"</object>",o=t(e.id)}else{f=l.createElement(i),f.setAttribute("type",s);for(var v in e)e[v]!=Object.prototype[v]&&("styleclass"==v.toLowerCase()?f.setAttribute("class",e[v]):"classid"!=v.toLowerCase()&&f.setAttribute(v,e[v]));for(u in a)a[u]!=Object.prototype[u]&&"movie"!=u.toLowerCase()&&(e=f,p=u,v=a[u],n=l.createElement("param"),n.setAttribute("name",p),n.setAttribute("value",v),e.appendChild(n));c.parentNode.replaceChild(f,c),o=f}return o}function t(e){var t=null;try{t=l.getElementById(e)}catch(a){}return t}function a(e){var t=d.pv,e=e.split(".");return e[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10)||0,e[2]=parseInt(e[2],10)||0,t[0]>e[0]||t[0]==e[0]&&t[1]>e[1]||t[0]==e[0]&&t[1]==e[1]&&t[2]>=e[2]?!0:!1}function n(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=r?encodeURIComponent(e):e}var r="undefined",i="object",s="application/x-shockwave-flash",o=window,l=document,c=navigator,d=function(){var e=typeof l.getElementById!=r&&typeof l.getElementsByTagName!=r&&typeof l.createElement!=r,t=c.userAgent.toLowerCase(),a=c.platform.toLowerCase(),n=a?/win/.test(a):/win/.test(t),a=a?/mac/.test(a):/mac/.test(t),t=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,d=!1,p=[0,0,0],u=null;if(typeof c.plugins!=r&&typeof c.plugins["Shockwave Flash"]==i)!(u=c.plugins["Shockwave Flash"].description)||typeof c.mimeTypes!=r&&c.mimeTypes[s]&&!c.mimeTypes[s].enabledPlugin||(d=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),p[0]=parseInt(u.replace(/^(.*)\..*$/,"$1"),10),p[1]=parseInt(u.replace(/^.*\.(.*)\s.*$/,"$1"),10),p[2]=/[a-zA-Z]/.test(u)?parseInt(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof o.ActiveXObject!=r)try{var f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");f&&(u=f.GetVariable("$version"))&&(d=!0,u=u.split(" ")[1].split(","),p=[parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10)])}catch(v){}return{w3:e,pv:p,wk:t,ie:d,win:n,mac:a}}();return{embedSWF:function(t,n,s,o,l,c,p,u,f){var v={success:!1,id:n};if(d.w3&&!(d.wk&&d.wk<312)&&t&&n&&s&&o&&l){s+="",o+="";var h={};if(u&&typeof u===i)for(var m in u)h[m]=u[m];if(h.data=t,h.width=s,h.height=o,t={},p&&typeof p===i)for(var b in p)t[b]=p[b];if(c&&typeof c===i)for(var g in c)typeof t.flashvars!=r?t.flashvars+="&"+g+"="+c[g]:t.flashvars=g+"="+c[g];a(l)&&(n=e(h,t,n),v.success=!0,v.ref=n)}f&&f(v)},ua:d,getFlashPlayerVersion:function(){return{major:d.pv[0],minor:d.pv[1],release:d.pv[2]}},hasFlashPlayerVersion:a,createSWF:function(t,a,n){return d.w3?e(t,a,n):void 0},getQueryParamValue:function(e){var t=l.location.search||l.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return n(t);for(var t=t.split("&"),a=0;a<t.length;a++)if(t[a].substring(0,t[a].indexOf("="))==e)return n(t[a].substring(t[a].indexOf("=")+1))}return""}}}();